<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>OHKA21 — Ultra Light Marketplace & Profil</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
:root{
  /* GANTI BACKGROUND DI SINI (1 baris) */
  --bg-image: url('https://files.catbox.moe/nnq35i.jpeg');
  --accent:#ffffff;
  --card: rgba(255,255,255,0.06);
  --glass: rgba(255,255,255,0.12);
  --maxw:1200px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial;color:var(--accent);-webkit-font-smoothing:antialiased}
body{background:#000}
body::before{content:"";position:fixed;inset:0;background:var(--bg-image) center/cover no-repeat;z-index:-2;transform:translateZ(0)}
body::after{content:"";position:fixed;inset:0;z-index:-1;pointer-events:none}
.app{width:94vw;max-width:var(--maxw);margin:3vh auto;height:84vh;border-radius:12px;overflow:hidden;display:flex;flex-direction:column;background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.02));box-shadow:0 18px 40px rgba(0,0,0,0.45)}
header{display:flex;justify-content:space-between;align-items:center;padding:14px 18px}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#6ad1ff,#9b7bff);display:flex;align-items:center;justify-content:center;color:#061126;font-weight:800}
nav{display:flex;gap:8px}
.btn{padding:8px 12px;border-radius:10px;border:0;background:rgba(255,255,255,0.08);color:var(--accent);cursor:pointer;font-weight:600}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
.body{display:flex;gap:16px;flex:1;overflow:hidden;padding:0 18px 18px}
.left{flex:1;overflow:auto;padding-right:8px}
.right{width:340px;min-width:240px;display:flex;flex-direction:column;gap:12px}
.card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 12px 30px rgba(0,0,0,0.35)}
.auth{max-width:560px;margin:6vh auto;padding:16px;border-radius:14px;background:var(--glass);backdrop-filter:blur(6px);box-shadow:0 14px 36px rgba(0,0,0,0.45)}
.input{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.03);color:var(--accent);margin-bottom:8px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px}
.item{padding:10px;border-radius:10px;background:rgba(255,255,255,0.03);text-align:center;transition:transform .16s,box-shadow .16s}
.item:hover{transform:translateY(-6px);box-shadow:0 16px 36px rgba(0,0,0,0.45)}
.price{font-weight:800;margin-top:8px}
.avatar{width:72px;height:72px;border-radius:12px;background:linear-gradient(135deg,#ffd6e7,#b6d9ff);display:flex;align-items:center;justify-content:center;font-weight:800;color:#061126}
.small{font-size:13px;color:rgba(255,255,255,0.9)}
.page{display:none;opacity:0;transform:translateY(8px);transition:opacity .22s,transform .22s}
.page.active{display:block;opacity:1;transform:translateY(0)}
footer{display:flex;justify-content:space-between;align-items:center;padding:10px 18px;font-size:13px;color:rgba(255,255,255,0.85)}
@media(max-width:920px){ .body{flex-direction:column} .right{display:none} .app{height:auto} }
.smallmuted{font-size:13px;color:rgba(255,255,255,0.86)}
</style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="brand"><div class="logo">OH</div><div><div style="font-weight:800">OHKA21 Cyber Academi</div><div class="small">Ultra light JS — </div></div></div>
      <nav>
        <button class="btn" data-nav="home">Home</button>
        <button class="btn" data-nav="kelas">Kelas</button>
        <button class="btn" data-nav="market">Marketplace</button>
        <button class="btn" data-nav="profil">Profil</button>
        <button id="btnLogout" class="btn btn-ghost" style="display:none">Logout</button>
      </nav>
    </header>

    <div class="body">
      <main class="left">
        <!-- HOME: Auth -->
        <section id="home" class="page active">
          <div class="auth card" role="form">
            <h2 style="margin:0 0 8px 0">Masuk / Daftar</h2>
            <div class="small" style="margin-bottom:10px">Form fokus awal. Data tersimpan di server. Untuk operasi server, sesuaikan endpoint.</div>
            <input id="userInput" class="input" placeholder="Username (unik)" autocomplete="off" />
            <input id="emailInput" class="input" placeholder="Email (opsional)" autocomplete="off" />
            <input id="passInput" class="input" type="password" placeholder="Password (min 4)" autocomplete="new-password" />
            <div style="display:flex;gap:8px">
              <button class="btn" id="registerBtn">Register</button>
              <button class="btn btn-ghost" id="loginBtn">Login</button>
            </div>
            <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn" id="t100">Top-up Rp100k</button>
              <button class="btn" id="t500">Top-up Rp500k</button>
              <button class="btn btn-ghost" id="clearBtn">ganti akun</button>
            </div>
          </div>
        </section>

        <!-- KELAS -->
        <section id="kelas" class="page card" style="display:none">
          <h3 style="margin-top:0">Daftar Kelas</h3>
          <div class="small" style="margin-bottom:10px">7 Blue Team & 8 Red Team — Harga 250.000–800.000</div>
          <div id="kelasGrid" class="grid"></div>
        </section>

        <!-- MARKET -->
        <section id="market" class="page card" style="display:none">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div><h3 style="margin:0">Marketplace</h3><div class="small">Beli warna, rank, avatar, dan kelas — langsung terpasang.</div></div>
            <div style="text-align:right"><div class="small">Saldo</div><div id="balShow" style="font-weight:800">Rp 0</div></div>
          </div>

          <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:12px 0">

          <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
            <input id="filterInput" class="input" placeholder="Cari produk..." style="max-width:320px" />
            <div class="smallmuted">Filter hasil saat ketik (JS ringan)</div>
          </div>

          <h4 style="margin:6px 0">Warna Nama</h4>
          <div id="colorGrid" class="grid"></div>

          <h4 style="margin-top:12px">Ranks</h4>
          <div id="rankGrid" class="grid"></div>

          <h4 style="margin-top:12px">Avatar (upload & preview)</h4>
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
            <input id="avatarFile" type="file" accept="image/*" />
            <button class="btn" id="applyAvatarBtn">Upload & Pasang</button>
            <div class="smallmuted">Preview muncul otomatis saat pilih file</div>
          </div>
        </section>

        <!-- PROFILE -->
        <section id="profil" class="page card" style="display:none">
          <div style="display:flex;gap:12px;align-items:center">
            <div id="profileAvatar" class="avatar">G</div>
            <div>
              <div id="profileName" style="font-weight:800;font-size:18px">Guest</div>
              <div id="profileEmail" class="small">-</div>
              <div style="margin-top:8px"><button class="btn btn-ghost" id="resetAccBtn">Reset Akun</button></div>
            </div>
          </div>

          <div class="card" style="margin-top:12px">
            <div style="font-weight:700">Rank & Bintang</div>
            <div id="rankArea" style="margin-top:8px">Belum punya rank</div>
          </div>

          <div class="card" style="margin-top:12px">
            <div style="font-weight:700">Kelas yang diikuti</div>
            <ul id="enrolled" style="margin-top:8px"></ul>
          </div>

          <div class="card" style="margin-top:12px">
            <div style="font-weight:700">Riwayat Pembelian</div>
            <ul id="history" style="margin-top:8px"></ul>
          </div>
        </section>
      </main>

      <aside class="right">
        <div class="card">
          <div style="display:flex;gap:12px;align-items:center">
            <div id="sideAvatar" class="avatar">OH</div>
            <div>
              <div id="sideName" style="font-weight:700">Guest</div>
              <div class="small">Saldo: <span id="sideBal">Rp 0</span></div>
            </div>
          </div>
          <div style="margin-top:12px" class="small">Pembayaran via: Dana/GoPay — <strong>+6285606213297</strong></div>
        </div>

        <div class="card small">
          <div style="font-weight:700">Panduan</div>
          <div style="margin-top:8px">belajar dengan rajin dan giat<code> okee</code> capai impianmu</div>
        </div>

        <div class="card" style="text-align:center">
          <div style="font-weight:700">Quick</div>
          <div style="margin-top:8px;display:flex;gap:8px;justify-content:center">
            <button class="btn" data-nav="home">Home</button>
            <button class="btn" data-nav="kelas">Kelas</button>
            <button class="btn" data-nav="market">Marketplace</button>
          </div>
        </div>
      </aside>
    </div>

    <footer>
      <div class="small">OHKA21 — Ultra lightweight JS ·</div>
      <div class="small">100% codingan OHKA21</div>
    </footer>
  </div>

<script>
/* Ultra-light JS (~220 lines but simple): localStorage-based app
   - Minimal helper functions
   - Event delegation, small DOM updates
*/

const $ = q => document.querySelector(q);
const $$ = q => document.querySelectorAll(q);
const PREFIX = 'ohka21_user_';
const CURR = 'ohka21_current';
const rupiah = n => 'Rp ' + Number(n||0).toLocaleString('id-ID');

/* Data models (catalog) */
const COLORS = [
  {id:'c_black', name:'Hitam Gelap', color:'#111827', price:25000},
  {id:'c_gold',  name:'Gold', color:'#D4AF37', price:75000},
  {id:'c_cyan',  name:'Cyan', color:'#00E5FF', price:50000},
  {id:'c_pink',  name:'Sakura Pink', color:'#FF7AB6', price:50000},
  {id:'c_red',   name:'Merah', color:'#FF4D4F', price:45000}
];
const RANKS = [
  {id:'r_bronze', name:'Bronze', price:50000, stars:1},
  {id:'r_silver', name:'Silver', price:100000, stars:2},
  {id:'r_gold', name:'Gold', price:200000, stars:3},
  {id:'r_diamond', name:'Diamond', price:400000, stars:4},
  {id:'r_legend', name:'Legend', price:700000, stars:5}
];
const CLASSES = [
  'Blue Recon','Blue Network Defense','Blue Web Security','Blue Forensics','Blue SIEM','Blue Malware Analysis','Blue SOC Ops',
  'Red Recon','Red Exploitation','Red Web Pentest','Red Wireless','Red PrivEsc','Red Advanced Exploit','Red C2 Ops','Red Social Engineering'
];
const CLASS_PRICES = [250000,300000,350000,400000,450000,500000,600000,700000,800000];

/* Storage helpers */
function saveUser(name,obj){ localStorage.setItem(PREFIX+name, JSON.stringify(obj)); }
function loadUser(name){ const r = localStorage.getItem(PREFIX+name); return r?JSON.parse(r):null; }
function setCurrent(name){ if(name) localStorage.setItem(CURR,name); else localStorage.removeItem(CURR); }
function getCurrentName(){ return localStorage.getItem(CURR); }
function getCurrent(){ const n=getCurrentName(); return n?loadUser(n):null; }

/* Build grids */
function buildGrids(){
  const kg = $('#kelasGrid'), cg = $('#colorGrid'), rg = $('#rankGrid');
  kg.innerHTML=''; cg.innerHTML=''; rg.innerHTML='';
  CLASSES.forEach((t,i)=>{
    const price = CLASS_PRICES[i % CLASS_PRICES.length];
    const el = document.createElement('div'); el.className='item';
    el.innerHTML = `<div style="font-weight:700">${t}</div><div class="small">${t.startsWith('Blue')?'Blue Team':'Red Team'}</div><div class="price">${rupiah(price)}</div><div style="margin-top:8px"><button class="btn buy-class" data-title="${escapeHtml(t)}" data-price="${price}">Beli</button></div>`;
    kg.appendChild(el);
  });
  COLORS.forEach(c=>{
    const el = document.createElement('div'); el.className='item';
    el.innerHTML = `<div style="height:36px;border-radius:6px;background:${c.color};margin-bottom:8px"></div><div style="font-weight:700">${c.name}</div><div class="price">${rupiah(c.price)}</div><div style="margin-top:8px"><button class="btn buy-color" data-id="${c.id}">Beli & Pasang</button></div>`;
    cg.appendChild(el);
  });
  RANKS.forEach(r=>{
    const el = document.createElement('div'); el.className='item';
    el.innerHTML = `<div style="font-weight:700">${r.name}</div><div style="margin-top:6px">${'★'.repeat(r.stars)}</div><div class="price">${rupiah(r.price)}</div><div style="margin-top:8px"><button class="btn buy-rank" data-id="${r.id}">Beli & Pasang</button></div>`;
    rg.appendChild(el);
  });
}

/* Simple escape */
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

/* UI updates */
function updateUI(){
  const user = getCurrent();
  $('#sideName').textContent = user ? user.username : 'Guest';
  $('#sideBal').textContent = user ? rupiah(user.balance) : rupiah(0);
  $('#balShow').textContent = user ? rupiah(user.balance) : rupiah(0);
  $('#btnLogout').style.display = user ? 'inline-block' : 'none';
  $('#profileName').textContent = user ? user.username : 'Guest';
  $('#profileEmail').textContent = user ? (user.email || '-') : '-';
  // avatar
  if(user && user.avatar){ $('#profileAvatar').style.backgroundImage = `url(${user.avatar})`; $('#profileAvatar').textContent=''; $('#sideAvatar').style.backgroundImage = `url(${user.avatar})`; $('#sideAvatar').textContent=''; }
  else { $('#profileAvatar').style.backgroundImage='none'; $('#profileAvatar').textContent = user ? user.username.charAt(0).toUpperCase() : 'G'; $('#sideAvatar').style.backgroundImage='none'; $('#sideAvatar').textContent = user ? user.username.split(' ').map(x=>x[0]).slice(0,2).join('') : 'OH'; }
  // color
  if(user && user.color){ $('#profileName').style.color = user.color; $('#sideName').style.color = user.color; } else { $('#profileName').style.color=''; $('#sideName').style.color=''; }
  // rank
  if(user && user.rank){ const r = RANKS.find(x=>x.id===user.rank); $('#rankArea').innerHTML = `<div style="font-weight:700">${r.name}</div><div style="color:gold;font-size:18px">${'★'.repeat(r.stars)}</div>`; } else $('#rankArea').textContent = 'Belum punya rank';
  // enrolled
  const en = $('#enrolled'); en.innerHTML = ''; if(user && user.enrolled && user.enrolled.length){ user.enrolled.forEach(k=>{ const li=document.createElement('li'); li.textContent = k; en.appendChild(li); }); } else en.innerHTML = '<li class="small">Belum ada</li>';
  // history
  const hist = $('#history'); hist.innerHTML=''; if(user && user.purchases && user.purchases.length){ user.purchases.slice().reverse().forEach(p=>{ const li=document.createElement('li'); li.textContent = `${p.type || p.item} — ${p.item || ''} ${p.price ? '— ' + rupiah(p.price) : ''} — ${new Date(p.time||Date.now()).toLocaleString()}`; hist.appendChild(li); }); } else hist.innerHTML = '<li class="small">Belum ada</li>';
}

/* Auth: register/login/logout */
function registerUser(){
  const u = $('#userInput').value.trim(), e = $('#emailInput').value.trim(), p = $('#passInput').value;
  if(!u || !p || p.length < 4){ alert('Isi username & password (min 4)'); return; }
  if(loadUser(u) && !confirm('User sudah ada. Timpa?')) return;
  const userObj = { username:u, email:e, pass:p, balance:0, enrolled:[], color:'', rank:'', avatar:'', purchases:[] };
  saveUser(u,userObj); setCurrent(u); updateUI(); showPage('kelas'); alert('Register & login sukses.');
}
function loginUser(){
  const u = $('#userInput').value.trim(), p = $('#passInput').value;
  if(!u || !p){ alert('Isi username & password'); return; }
  const obj = loadUser(u); if(!obj){ alert('User tidak ditemukan. Daftar dulu.'); return; }
  if(obj.pass !== p){ alert('Password salah'); return; }
  setCurrent(u); updateUI(); showPage('kelas'); alert('Login sukses.');
}
function logout(){
  setCurrent(null); updateUI(); showPage('home'); alert('Logout.');
}

/* Actions: topup, buy color/rank/class, upload avatar, reset */
function topUp(amount){
  const cur = getCurrentName(); if(!cur){ alert('Login dulu'); showPage('home'); return; }
  const u = loadUser(cur); u.balance = Number(u.balance||0) + Number(amount); u.purchases = u.purchases||[]; u.purchases.push({type:'topup', item:'Top-up', price:amount, time: new Date().toISOString()}); saveUser(cur,u); updateUI(); alert('Top-up +'+rupiah(amount));
}
function buyColor(id){
  const cur = getCurrentName(); if(!cur){ alert('Login dulu'); showPage('home'); return; }
  const item = COLORS.find(c=>c.id===id); if(!item) return;
  const u = loadUser(cur);
  if(u.balance < item.price){ if(!confirm('Saldo tidak cukup. Top-up demo?')) return; }
  u.balance -= item.price; u.color = item.color; u.purchases = u.purchases||[]; u.purchases.push({type:'color', item:item.name, price:item.price, time:new Date().toISOString()}); saveUser(cur,u); updateUI(); alert('Warna terpasang: '+item.name);
}
function buyRank(id){
  const cur = getCurrentName(); if(!cur){ alert('Login dulu'); showPage('home'); return; }
  const item = RANKS.find(c=>c.id===id); if(!item) return;
  const u = loadUser(cur);
  if(u.balance < item.price){ if(!confirm('Saldo tidak cukup. Top-up demo?')) return; }
  u.balance -= item.price; u.rank = item.id; u.purchases = u.purchases||[]; u.purchases.push({type:'rank', item:item.name, price:item.price, time:new Date().toISOString()}); saveUser(cur,u); updateUI(); alert('Rank terpasang: '+item.name);
}
function buyClass(title,price){
  const cur = getCurrentName(); if(!cur){ alert('Login dulu'); showPage('home'); return; }
  const u = loadUser(cur); u.enrolled = u.enrolled||[]; if(u.enrolled.includes(title)){ alert('Sudah terdaftar'); return; }
  if(u.balance < price){ if(!confirm('Saldo tidak cukup. Top-up demo?')) return; }
  u.balance -= price; u.enrolled.push(title); u.purchases = u.purchases||[]; u.purchases.push({type:'class', item:title, price, time:new Date().toISOString()}); saveUser(cur,u); updateUI(); alert('Terdaftar: '+title);
}
function uploadAvatarApply(){
  const cur = getCurrentName(); if(!cur){ alert('Login dulu'); showPage('home'); return; }
  const f = $('#avatarFile').files[0]; if(!f){ alert('Pilih file'); return; }
  const r = new FileReader();
  r.onload = e => { const u = loadUser(cur); u.avatar = e.target.result; u.purchases = u.purchases||[]; u.purchases.push({type:'avatar', item:'upload', time:new Date().toISOString()}); saveUser(cur,u); updateUI(); alert('Avatar terpasang.'); };
  r.readAsDataURL(f);
}
function resetAccount(){
  const cur = getCurrentName(); if(!cur){ alert('Login dulu'); return; }
  if(!confirm('Reset akun?')) return;
  const u = loadUser(cur); u.balance = 0; u.enrolled = []; u.color=''; u.rank=''; u.avatar=''; u.purchases=[]; saveUser(cur,u); updateUI(); alert('Akun direset.');
}
function clearAll(){
  if(!confirm('Hapus data aplikasi (localStorage)??')) return;
  Object.keys(localStorage).filter(k=>k.startsWith(PREFIX) || k===CURR).forEach(k=>localStorage.removeItem(k));
  location.reload();
}

/* Event binding (minimal) */
function attachEvents(){
  // nav
  $$('.btn[data-nav]').forEach(b => b.addEventListener('click', ()=> showPage(b.dataset.nav)));
  $('#registerBtn').addEventListener('click', registerUser);
  $('#loginBtn').addEventListener('click', loginUser);
  $('#btnLogout').addEventListener('click', logout);
  $('#t100').addEventListener('click', ()=>topUp(100000));
  $('#t500').addEventListener('click', ()=>topUp(500000));
  $('#clearBtn').addEventListener('click', clearAll);
  $('#applyAvatarBtn').addEventListener('click', uploadAvatarApply);
  $('#resetAccBtn').addEventListener('click', resetA
